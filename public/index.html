<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>Supabase Auth API Tester</title>
  <meta name="title" content="Supabase Auth API Tester">
  <meta name="description" content="Interactive API tester for Supabase Authentication REST API. Test signup, sign-in, OTP verification, password reset, Google OAuth, and user management endpoints. Built with Node.js and Express.">
  <meta name="keywords" content="supabase, authentication, API tester, REST API, OTP, one-time password, password reset, OAuth, Google OAuth, email verification, signup, signin, login, user management, Node.js, Express, JWT, session management, API testing tool">
  <meta name="author" content="Fazla Rabbi">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <meta name="revisit-after" content="7 days">
  <meta name="theme-color" content="#0f0f12">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://github.com/fazla-cloud/Supabase-Auth">
  <meta property="og:title" content="Supabase Auth API Tester">
  <meta property="og:description" content="Interactive API tester for Supabase Authentication REST API. Test signup, sign-in, OTP verification, password reset, Google OAuth, and user management endpoints.">
  <meta property="og:image" content="https://github.com/fazla-cloud/Supabase-Auth/assets/images/fazla.png">
  <meta property="og:site_name" content="Supabase Auth API Tester">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://github.com/fazla-cloud/Supabase-Auth">
  <meta name="twitter:title" content="Supabase Auth API Tester">
  <meta name="twitter:description" content="Interactive API tester for Supabase Authentication REST API. Test signup, sign-in, OTP verification, password reset, Google OAuth, and user management endpoints.">
  <meta name="twitter:image" content="https://github.com/fazla-cloud/Supabase-Auth/assets/images/fazla.png">
  <meta name="twitter:creator" content="@fazla_fr">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://github.com/fazla-cloud/Supabase-Auth">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/images/Supabase-Auth.png">
  
  <!-- Hugeicons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hugeicons@0.0.1/font/hugeicons.css">
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Supabase Auth API Server",
    "description": "REST API server for Supabase Authentication with built-in API tester UI",
    "url": "https://github.com/fazla-cloud/Supabase-Auth",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Fazla Rabbi",
      "url": "https://fazla.pro",
      "email": "frchowdhury480@gmail.com"
    },
    "keywords": "supabase, authentication, API tester, REST API, OTP, OAuth",
    "programmingLanguage": "JavaScript",
    "runtimePlatform": "Node.js"
  }
  </script>
  <style>
    :root {
      --bg: #0f0f12;
      --card: #1a1a1f;
      --border: #2d2d35;
      --text: #e4e4e7;
      --muted: #71717a;
      --accent: #3b82f6;
      --success: #22c55e;
      --error: #ef4444;
      /* Neumorphism colors for profile card (dark theme) */
      --neu-bg: #2a2a32;
      --neu-shadow-light: #3a3a44;
      --neu-shadow-dark: #1a1a22;
      --neu-text: #e4e4e7;
      --neu-muted: #9ca3af;
    }
    [data-theme="light"] {
      --bg: #ffffff;
      --card: #f5f5f5;
      --border: #e0e0e0;
      --text: #1a1a1a;
      --muted: #666666;
      /* Neumorphism colors for profile card (light theme) */
      --neu-bg: #e0e5ec;
      --neu-shadow-light: #ffffff;
      --neu-shadow-dark: #a3b1c6;
      --neu-text: #1a1a1a;
      --neu-muted: #5a6b7f;
      --accent: #3b82f6;
      --success: #22c55e;
      --error: #ef4444;
    }
    * { 
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      height: 100vh;
      overflow: hidden;
    }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }
    .layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100vh;
      overflow: hidden;
    }
    .left {
      overflow-y: auto;
      padding: 2rem 2.5rem;
      margin: 1rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .left::-webkit-scrollbar {
      display: none;
    }
    .right {
      background: var(--neu-bg);
      padding: 3rem 2rem;
      overflow-y: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .right::-webkit-scrollbar {
      display: none;
    }
    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      color: var(--text);
    }
    .theme-toggle:hover {
      transform: rotate(15deg);
      box-shadow: 0 2px 8px var(--neu-shadow-dark);
    }
    .theme-toggle i {
      font-size: 18px;
    }
    /* Profile FAB (mobile only) */
    .profile-fab {
      display: none;
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--neu-bg);
      border: 3px solid var(--accent);
      padding: 3px;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s, box-shadow 0.3s;
      overflow: hidden;
    }
    .profile-fab:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }
    .profile-fab:active {
      transform: scale(0.95);
    }
    .profile-fab img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    
    /* Profile Modal */
    .profile-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .profile-modal.open {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
    }
    .profile-modal-backdrop {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
    }
    .profile-modal-content {
      position: relative;
      z-index: 1;
      max-width: 90%;
      max-height: 85vh;
      overflow-y: auto;
      animation: modalSlideIn 0.3s ease;
      padding: 10px;
    }
    @keyframes modalSlideIn {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    .profile-modal-close {
      position: absolute;
      top: 22px;
      right: 22px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.3);
      border: none;
      color: #fff;
      font-size: 1.4rem;
      font-weight: 300;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      transition: background 0.2s, transform 0.2s;
      line-height: 1;
    }
    .profile-modal-close:hover {
      background: var(--error);
      transform: scale(1.1);
    }
    
    /* Responsive - Tablet and below */
    @media (max-width: 1024px) {
      .layout { 
        grid-template-columns: 1fr; 
        grid-template-rows: auto;
        height: auto;
        overflow: visible;
      }
      html, body {
        overflow: auto;
        height: auto;
      }
      .left {
        padding: 1.5rem;
        overflow: visible;
      }
      .right { 
        display: none; /* Hide profile section, show via FAB */
      }
      .profile-fab {
        display: block;
      }
      /* Compact profile card for modal */
      .profile-modal-content {
        padding: 15px;
      }
      .profile-modal-content .portfolio-card {
        margin: 0;
        max-width: 380px;
        padding: 2rem 1.75rem 1.75rem;
        border-radius: 12px;
      }
      .profile-modal-content .profile-image-wrapper {
        width: 120px;
        height: 120px;
        margin: 0 auto 1.25rem;
        padding: 5px;
      }
      .profile-modal-content .portfolio-card h3 {
        font-size: 1.5rem;
        margin: 0 0 0.25rem;
      }
      .profile-modal-content .portfolio-card .role {
        font-size: 0.95rem;
        margin: 0 0 0.75rem;
      }
      .profile-modal-content .contact-links {
        margin: 0.75rem 0 1rem;
        gap: 0.75rem;
      }
      .profile-modal-content .contact-links a {
        width: 38px;
        height: 38px;
      }
      .profile-modal-content .contact-links a svg {
        width: 18px;
        height: 18px;
      }
      .profile-modal-content .action-buttons {
        gap: 0.75rem;
        margin: 1rem 0;
      }
      .profile-modal-content .action-btn {
        padding: 0.65rem 1.1rem;
        font-size: 0.875rem;
        border-radius: 6px;
      }
      .profile-modal-content .socials-divider {
        margin: 0.75rem 0;
      }
      .profile-modal-content .socials-title {
        font-size: 0.7rem;
        margin: 0 0 0.75rem;
      }
      .profile-modal-content .portfolio-card .socials {
        gap: 0.7rem;
        margin: 0;
      }
      .profile-modal-content .portfolio-card .socials a {
        width: 40px;
        height: 40px;
      }
      .profile-modal-content .portfolio-card .socials a svg {
        width: 18px;
        height: 18px;
      }
      .profile-modal-close {
        top: 20px;
        right: 20px;
        width: 30px;
        height: 30px;
        font-size: 1.3rem;
      }
    }
    
    /* Responsive - Mobile */
    @media (max-width: 600px) {
      .left {
        padding: 1rem;
      }
      .left-header {
        margin-bottom: 1.5rem;
      }
      h1 {
        font-size: 1.4rem;
      }
      .sub {
        font-size: 0.85rem;
      }
      .base-url {
        flex-direction: column;
        align-items: flex-start;
        padding: 1rem;
      }
      .base-url label {
        margin-bottom: 0.5rem;
      }
      .base-url input {
        width: 100%;
        max-width: 100%;
      }
      .settings-panel {
        margin-bottom: 1rem;
      }
      .settings-body {
        padding: 1rem;
      }
      .env-row input {
        font-size: 0.8rem;
      }
      .card {
        padding: 1rem;
      }
      .card h2 {
        font-size: 0.9rem;
        flex-wrap: wrap;
      }
      .row {
        flex-direction: column;
        align-items: stretch;
        gap: 0.4rem;
      }
      .row label {
        min-width: auto;
        text-align: left;
        width: 100%;
      }
      .row input, .row textarea {
        width: 100%;
        min-width: auto;
        box-sizing: border-box;
      }
      button.run {
        width: 100%;
      }
      .out {
        font-size: 0.75rem;
        padding: 0.75rem;
      }
      .right {
        padding: 1.5rem 1rem;
      }
      .portfolio-card {
        padding: 2rem 1.5rem;
        border-radius: 10px;
      }
      .profile-image-wrapper {
        width: 140px;
        height: 140px;
      }
      .portfolio-card h3 {
        font-size: 1.5rem;
      }
      .portfolio-card .role {
        font-size: 0.95rem;
      }
      .contact-links a {
        width: 40px;
        height: 40px;
      }
      .contact-links a svg {
        width: 20px;
        height: 20px;
      }
      .action-buttons {
        flex-direction: column;
        gap: 0.75rem;
      }
      .action-btn {
        width: 100%;
      }
      .portfolio-card .socials {
        gap: 0.75rem;
      }
      .portfolio-card .socials a {
        width: 42px;
        height: 42px;
      }
      .theme-toggle {
        top: 0.75rem;
        right: 0.75rem;
        width: 36px;
        height: 36px;
      }
    }
    
    /* Responsive - Small phones */
    @media (max-width: 380px) {
      .left {
        padding: 0.75rem;
      }
      h1 {
        font-size: 1.2rem;
      }
      .card {
        padding: 0.85rem;
      }
      .portfolio-card {
        padding: 1.5rem 1rem;
      }
      .profile-image-wrapper {
        width: 120px;
        height: 120px;
      }
      .portfolio-card h3 {
        font-size: 1.3rem;
      }
      .action-buttons {
        gap: 0.5rem;
      }
      .action-btn {
        padding: 0.7rem 1rem;
        font-size: 0.85rem;
      }
      /* Slightly smaller modal for small phones */
      .profile-fab {
        width: 54px;
        height: 54px;
        bottom: 1rem;
        right: 1rem;
      }
      .profile-modal-content {
        padding: 12px;
      }
      .profile-modal-content .portfolio-card {
        max-width: 300px;
        padding: 1.5rem 1.25rem 1.25rem;
      }
      .profile-modal-content .profile-image-wrapper {
        width: 100px;
        height: 100px;
        margin: 0 auto 1rem;
      }
      .profile-modal-content .portfolio-card h3 {
        font-size: 1.3rem;
        margin: 0 0 0.2rem;
      }
      .profile-modal-content .portfolio-card .role {
        font-size: 0.875rem;
        margin: 0 0 0.5rem;
      }
      .profile-modal-content .contact-links {
        margin: 0.5rem 0 0.75rem;
        gap: 0.6rem;
      }
      .profile-modal-content .contact-links a {
        width: 34px;
        height: 34px;
      }
      .profile-modal-content .contact-links a svg {
        width: 16px;
        height: 16px;
      }
      .profile-modal-content .action-buttons {
        margin: 0.75rem 0;
        gap: 0.5rem;
      }
      .profile-modal-content .action-btn {
        padding: 0.55rem 0.9rem;
        font-size: 0.8rem;
      }
      .profile-modal-content .socials-divider {
        margin: 0.5rem 0;
      }
      .profile-modal-content .socials-title {
        font-size: 0.65rem;
        margin: 0 0 0.5rem;
      }
      .profile-modal-content .portfolio-card .socials {
        gap: 0.5rem;
      }
      .profile-modal-content .portfolio-card .socials a {
        width: 36px;
        height: 36px;
      }
      .profile-modal-content .portfolio-card .socials a svg {
        width: 16px;
        height: 16px;
      }
      .profile-modal-close {
        top: 16px;
        right: 16px;
        width: 28px;
        height: 28px;
        font-size: 1.2rem;
      }
    }
    /* Left Column - API Tester Styles */
    .left-header {
      margin-bottom: 2rem;
    }
    h1 { 
      font-size: 1.75rem; 
      margin: 0 0 0.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent), #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .sub { 
      color: var(--muted); 
      font-size: 0.9rem; 
      margin-bottom: 0;
    }
    .base-url {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.75rem;
      padding: 1rem 1.25rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
    }
    .base-url label { 
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--muted);
    }
    .base-url input {
      flex: 1;
      max-width: min(20rem, 100%);
      padding: 0.6rem 0.9rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      font-size: 0.9rem;
      font-family: ui-monospace, monospace;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .base-url input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
    }
    .base-url-hint {
      margin: 0.5rem 0 0;
      font-size: 0.8rem;
      color: var(--muted);
    }
    .base-url-hint a {
      color: var(--accent);
      text-decoration: none;
    }
    .base-url-hint a:hover {
      text-decoration: underline;
    }
    .cards { 
      display: grid; 
      gap: 1rem;
    }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1.25rem 1.5rem;
      transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
      text-align: left;
    }
    .card:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }
    .card h2 {
      font-size: 1rem;
      margin: 0 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-weight: 600;
    }
    .card h2 .method {
      font-size: 0.65rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .method.get { 
      background: #22c55e22; 
      color: #22c55e;
      border: 1px solid #22c55e44;
    }
    .method.post { 
      background: #3b82f622; 
      color: #3b82f6;
      border: 1px solid #3b82f644;
    }
    .row { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 0.75rem; 
      align-items: center; 
      margin-bottom: 0.6rem;
    }
    .row:last-of-type { 
      margin-bottom: 0;
    }
    .row label { 
      min-width: 5.5rem; 
      color: var(--muted); 
      font-size: 0.85rem;
      font-weight: 500;
      text-transform: capitalize;
    }
    .row input, .row textarea {
      padding: 0.5rem 0.75rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      font-size: 0.9rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .row input:focus, .row textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
    }
    .row input { 
      min-width: min(12rem, 100%);
      flex: 1;
    }
    .row textarea { 
      min-width: min(18rem, 100%);
      min-height: 2.5rem; 
      font-family: inherit;
      flex: 1; 
      resize: vertical;
    }
    button.run {
      margin-top: 1rem;
      padding: 0.6rem 1.25rem;
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    button.run:hover { 
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }
    button.run:active {
      transform: translateY(0);
    }
    .out {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: ui-monospace, monospace;
      font-size: 0.8rem;
      white-space: pre-wrap;
      word-break: break-all;
      max-height: 12rem;
      overflow: auto;
      line-height: 1.5;
    }
    .out.empty { 
      color: var(--muted);
      font-style: italic;
    }
    .out.err { 
      color: var(--error);
      background: rgba(239, 68, 68, 0.08);
      border-color: rgba(239, 68, 68, 0.3);
    }
    .out.ok { 
      color: var(--success);
      background: rgba(34, 197, 94, 0.08);
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    /* Settings Panel */
    .settings-panel {
      margin-bottom: 1.5rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
    }
    .settings-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.9rem 1.25rem;
      cursor: pointer;
      user-select: none;
      transition: background 0.2s;
    }
    .settings-header:hover {
      background: var(--bg);
    }
    .settings-header h3 {
      margin: 0;
      font-size: 0.95rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .settings-header h3 svg {
      width: 18px;
      height: 18px;
      opacity: 0.7;
    }
    .settings-toggle {
      width: 20px;
      height: 20px;
      transition: transform 0.3s;
      color: var(--muted);
    }
    .settings-panel.open .settings-toggle {
      transform: rotate(180deg);
    }
    .settings-body {
      display: none;
      padding: 1rem 1.25rem;
      border-top: 1px solid var(--border);
      background: var(--bg);
    }
    .settings-panel.open .settings-body {
      display: block;
    }
    .env-row {
      margin-bottom: 1rem;
    }
    .env-row:last-child {
      margin-bottom: 0;
    }
    .env-row label {
      display: block;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 0.4rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .env-row input {
      width: 100%;
      padding: 0.6rem 0.9rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      font-size: 0.85rem;
      font-family: ui-monospace, monospace;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .env-row input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
    }
    .env-row input::placeholder {
      color: var(--muted);
      opacity: 0.6;
    }
    .env-hint {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 0.3rem;
    }
    .env-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.25rem;
    }
    .env-btn {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .env-btn.save {
      background: var(--success);
      color: white;
      border: none;
    }
    .env-btn.save:hover {
      filter: brightness(1.1);
    }
    .env-btn.clear {
      background: transparent;
      color: var(--muted);
      border: 1px solid var(--border);
    }
    .env-btn.clear:hover {
      border-color: var(--error);
      color: var(--error);
    }
    .env-status {
      font-size: 0.8rem;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      margin-top: 1rem;
      display: none;
    }
    .env-status.success {
      display: block;
      background: rgba(34, 197, 94, 0.15);
      color: var(--success);
    }
    .env-status.info {
      display: block;
      background: rgba(59, 130, 246, 0.15);
      color: var(--accent);
    }
    
    /* Neumorphism Profile Card ONLY */
    .portfolio-card {
      width: 100%;
      max-width: 480px;
      background: var(--neu-bg);
      border-radius: 12px;
      padding: 3rem 2.5rem;
      text-align: center;
      box-shadow: 
        6px 6px 12px var(--neu-shadow-dark),
        -6px -6px 12px var(--neu-shadow-light);
      transition: all 0.4s ease;
    }
    
    .profile-image-wrapper {
      position: relative;
      width: 180px;
      height: 180px;
      margin: 0 auto 2rem;
      border-radius: 50%;
      background: var(--neu-bg);
      box-shadow: 
        4px 4px 8px var(--neu-shadow-dark),
        -4px -4px 8px var(--neu-shadow-light);
      padding: 10px;
    }
    
    .profile-image-inner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      position: relative;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6, #22c55e);
      padding: 5px;
    }
    
    .portfolio-card img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      background: var(--neu-bg);
    }
    
    .portfolio-card h3 {
      font-size: 1.85rem;
      margin: 0 0 0.5rem;
      color: var(--neu-text);
      font-weight: 700;
      letter-spacing: -0.3px;
    }
    
    .portfolio-card .role {
      color: var(--neu-muted);
      font-size: 1.1rem;
      margin-bottom: 1rem;
      font-weight: 500;
    }
    
    .contact-links {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0 1.5rem;
    }
    
    .contact-links a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--neu-bg);
      color: var(--neu-text);
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 
        3px 3px 6px var(--neu-shadow-dark),
        -3px -3px 6px var(--neu-shadow-light);
    }
    
    .contact-links a:hover {
      color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 
        4px 4px 8px var(--neu-shadow-dark),
        -4px -4px 8px var(--neu-shadow-light);
    }
    
    .contact-links a svg {
      width: 22px;
      height: 22px;
    }
    
    .action-buttons {
      display: flex;
      gap: 1.25rem;
      margin: 1.75rem 0 1.5rem;
    }
    
    .action-btn {
      flex: 1;
      padding: 0.9rem 1.5rem;
      background: var(--neu-bg);
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      color: var(--neu-text);
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 
        4px 4px 8px var(--neu-shadow-dark),
        -4px -4px 8px var(--neu-shadow-light);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 
        6px 6px 12px var(--neu-shadow-dark),
        -6px -6px 12px var(--neu-shadow-light);
    }
    
    .action-btn:active {
      transform: translateY(0);
      box-shadow: 
        inset 3px 3px 6px var(--neu-shadow-dark),
        inset -3px -3px 6px var(--neu-shadow-light);
    }
    
    .action-btn.primary {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
    }
    
    .action-btn.primary:hover {
      box-shadow:
        6px 6px 12px rgba(59, 130, 246, 0.3);
    }
    
    .action-btn.primary:active {
      box-shadow: 
        inset 3px 3px 6px rgba(0, 0, 0, 0.2),
        inset -3px -3px 6px rgba(255, 255, 255, 0.05);
    }
    
    .socials-divider {
      margin: 1.5rem 0 1.25rem;
      height: 1px;
      background: linear-gradient(to right, transparent, var(--neu-shadow-dark), transparent);
    }
    
    .socials-title {
      font-size: 0.85rem;
      color: var(--neu-muted);
      margin-bottom: 1.25rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .portfolio-card .socials {
      display: flex;
      justify-content: center;
      gap: 1.25rem;
      flex-wrap: wrap;
    }
    
    .portfolio-card .socials a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--neu-bg);
      color: var(--neu-text);
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 
        3px 3px 6px var(--neu-shadow-dark),
        -3px -3px 6px var(--neu-shadow-light);
    }
    
    .portfolio-card .socials a:hover {
      transform: translateY(-2px);
      box-shadow: 
        4px 4px 8px var(--neu-shadow-dark),
        -4px -4px 8px var(--neu-shadow-light);
      color: #3b82f6;
    }
    
    .portfolio-card .socials a:active {
      transform: translateY(0);
      box-shadow: 
        inset 2px 2px 4px var(--neu-shadow-dark),
        inset -2px -2px 4px var(--neu-shadow-light);
    }
    
    .portfolio-card .socials a svg {
      width: 24px;
      height: 24px;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" id="themeToggle" title="Toggle theme">
    <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
  </button>
  
  <!-- Profile FAB (mobile only) -->
  <button class="profile-fab" id="profileFab" title="View Profile">
    <img src="https://raw.githubusercontent.com/fazla-cloud/Supabase-Auth/refs/heads/main/assets/images/fazla.png" alt="Profile">
  </button>
  
  <!-- Profile Modal (mobile only) -->
  <div class="profile-modal" id="profileModal">
    <div class="profile-modal-backdrop" id="profileModalBackdrop"></div>
    <div class="profile-modal-content">
      <button class="profile-modal-close" id="profileModalClose">&times;</button>
      <div class="portfolio-card" id="profileModalCard">
        <!-- Content will be cloned from .right via JS -->
      </div>
    </div>
  </div>
  <div class="layout">
    <div class="left">
  <div class="left-header">
    <h1>Supabase Auth API Tester</h1>
    <p class="sub">Run any endpoint and see the response below each card.</p>
  </div>

  <div class="settings-panel" id="settingsPanel">
    <div class="settings-header" id="settingsToggle">
      <h3>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        Environment Variables
      </h3>
      <svg class="settings-toggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </div>
    <div class="settings-body">
      <div class="env-row">
        <label for="envUrl">Supabase URL</label>
        <input type="text" id="envUrl" placeholder="https://your-project.supabase.co">
        <p class="env-hint">Your Supabase project URL</p>
      </div>
      <div class="env-row">
        <label for="envAnonKey">Supabase Anon Key</label>
        <input type="text" id="envAnonKey" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...">
        <p class="env-hint">Public anonymous key from your project settings</p>
      </div>
      <div class="env-row">
        <label for="envServiceKey">Service Role Key (optional)</label>
        <input type="password" id="envServiceKey" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...">
        <p class="env-hint">Admin key for privileged operations (keep secret!)</p>
      </div>
      <div class="env-actions">
        <button class="env-btn save" id="envSave">Save</button>
        <button class="env-btn clear" id="envClear">Clear</button>
      </div>
      <div class="env-status" id="envStatus"></div>
    </div>
  </div>

  <div class="base-url">
    <label for="base">Base URL</label>
    <input type="text" id="base" placeholder="Auto-detected from current URL">
    <p class="base-url-hint" id="baseUrlHint" style="display:none;"></p>
  </div>

  <div class="cards">
    <div class="card">
      <h2><span class="method get">GET</span> /health</h2>
      <button class="run" data-path="/health" data-method="GET">Run</button>
      <pre class="out empty" data-out="health">—</pre>
    </div>

    <div class="card">
      <h2><span class="method get">GET</span> /supabase-status</h2>
      <button class="run" data-path="/supabase-status" data-method="GET">Run</button>
      <pre class="out empty" data-out="supabase-status">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /signUp</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <div class="row"><label>password</label><input type="password" name="password" placeholder="password"></div>
      <div class="row"><label>data (JSON)</label><input name="data" placeholder='{"display_name":"Test"}'> </div>
      <button class="run" data-path="/signUp" data-method="POST" data-body='["email","password","data"]'>Run</button>
      <pre class="out empty" data-out="signUp">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /signUpVerify</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <div class="row"><label>token</label><input name="token" placeholder="123456"></div>
      <div class="row"><label>type</label><input name="type" placeholder="signup"></div>
      <button class="run" data-path="/signUpVerify" data-method="POST" data-body='["email","token","type"]'>Run</button>
      <pre class="out empty" data-out="signUpVerify">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /resendOtp</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <button class="run" data-path="/resendOtp" data-method="POST" data-body='["email"]'>Run</button>
      <pre class="out empty" data-out="resendOtp">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /signIn</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <div class="row"><label>password</label><input type="password" name="password" placeholder="password"></div>
      <button class="run" data-path="/signIn" data-method="POST" data-body='["email","password"]'>Run</button>
      <pre class="out empty" data-out="signIn">—</pre>
    </div>

    <div class="card">
      <h2><span class="method get">GET</span> /gglSignIn</h2>
      <div class="row"><label>redirectTo</label><input name="redirectTo" placeholder="https://your-app.com/callback"></div>
      <button class="run" data-path="/gglSignIn" data-method="GET" data-query='["redirectTo"]'>Run</button>
      <pre class="out empty" data-out="gglSignIn">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /forgtPss</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <div class="row"><label>redirectTo</label><input name="redirectTo" placeholder="https://your-app.com/reset-password"></div>
      <button class="run" data-path="/forgtPss" data-method="POST" data-body='["email","redirectTo"]'>Run</button>
      <pre class="out empty" data-out="forgtPss">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /resetPssVerify</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <div class="row"><label>token</label><input name="token" placeholder="OTP from email"></div>
      <div class="row"><label>newPassword</label><input type="password" name="newPassword" placeholder="new password"></div>
      <button class="run" data-path="/resetPssVerify" data-method="POST" data-body='["email","token","newPassword"]'>Run</button>
      <pre class="out empty" data-out="resetPssVerify">—</pre>
    </div>

    <div class="card">
      <h2><span class="method get">GET</span> /getUsr (Bearer)</h2>
      <div class="row"><label>Authorization</label><input name="bearer" placeholder="Bearer access_token"></div>
      <button class="run" data-path="/getUsr" data-method="GET" data-header-bearer="bearer">Run</button>
      <pre class="out empty" data-out="getUsr">—</pre>
    </div>

    <div class="card">
      <h2><span class="method get">GET</span> /getUsr?email= (admin)</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <button class="run" data-path="/getUsr" data-method="GET" data-query='["email"]'>Run</button>
      <pre class="out empty" data-out="getUsrEmail">—</pre>
    </div>

    <div class="card">
      <h2><span class="method post">POST</span> /usrExst</h2>
      <div class="row"><label>email</label><input name="email" placeholder="test@example.com"></div>
      <button class="run" data-path="/usrExst" data-method="POST" data-body='["email"]'>Run</button>
      <pre class="out empty" data-out="usrExst">—</pre>
    </div>
  </div>
  </div>

  <aside class="right">
    <div class="portfolio-card">
      <div class="profile-image-wrapper">
        <div class="profile-image-inner">
          <img src="https://raw.githubusercontent.com/fazla-cloud/Supabase-Auth/refs/heads/main/assets/images/fazla.png" alt="Fazla Rabbi" width="180" height="180">
        </div>
      </div>
      
      <h3>Fazla Rabbi</h3>
      <p class="role">Software Developer</p>
      
      <div class="contact-links">
        <a href="https://fazla.pro" target="_blank" rel="noopener" title="Website">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
        </a>
        <a href="mailto:frchowdhury480@gmail.com" title="Email">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
        </a>
      </div>
      
      <div class="action-buttons">
        <a href="mailto:frchowdhury480@gmail.com" class="action-btn primary">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          Contact
        </a>
        <a href="https://fazla.pro" target="_blank" rel="noopener" class="action-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          Portfolio
        </a>
      </div>
      
      <div class="socials-divider"></div>
      <p class="socials-title">Follow Me</p>
      
      <div class="socials">
        <a href="https://github.com/fazla-cloud" title="GitHub" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg>
        </a>
        <a href="https://www.linkedin.com/in/fazla1/" title="LinkedIn" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </a>
        <a href="https://www.facebook.com/InnocentP480" title="Facebook" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
        </a>
        <a href="https://x.com/fazla_fr" title="X (Twitter)" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
      </div>
    </div>
  </aside>
  </div>

  <script>
    // Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;
    
    // Load saved theme or default to dark
    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);
    const moonIcon = themeToggle.querySelector('.icon-moon');
    const sunIcon = themeToggle.querySelector('.icon-sun');
    
    function updateThemeIcon(theme) {
      if (theme === 'dark') {
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
      } else {
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
      }
    }
    updateThemeIcon(savedTheme);
    
    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
      updateThemeIcon(newTheme);
      localStorage.setItem('theme', newTheme);
    });

    // Profile FAB & Modal (mobile)
    const profileFab = document.getElementById('profileFab');
    const profileModal = document.getElementById('profileModal');
    const profileModalBackdrop = document.getElementById('profileModalBackdrop');
    const profileModalClose = document.getElementById('profileModalClose');
    const profileModalCard = document.getElementById('profileModalCard');
    const originalCard = document.querySelector('.right .portfolio-card');
    
    // Clone portfolio card content into modal
    if (originalCard && profileModalCard) {
      profileModalCard.innerHTML = originalCard.innerHTML;
    }
    
    function openProfileModal() {
      profileModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      // Trigger animation
      setTimeout(() => profileModal.classList.add('open'), 10);
    }
    
    function closeProfileModal() {
      profileModal.classList.remove('open');
      document.body.style.overflow = '';
      setTimeout(() => {
        profileModal.style.display = 'none';
      }, 300);
    }
    
    profileFab.addEventListener('click', openProfileModal);
    profileModalBackdrop.addEventListener('click', closeProfileModal);
    profileModalClose.addEventListener('click', closeProfileModal);
    
    // Close modal on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && profileModal.classList.contains('open')) {
        closeProfileModal();
      }
    });

    // Settings Panel Toggle
    const settingsPanel = document.getElementById('settingsPanel');
    const settingsToggle = document.getElementById('settingsToggle');
    const envUrlInput = document.getElementById('envUrl');
    const envAnonKeyInput = document.getElementById('envAnonKey');
    const envServiceKeyInput = document.getElementById('envServiceKey');
    const envSaveBtn = document.getElementById('envSave');
    const envClearBtn = document.getElementById('envClear');
    const envStatus = document.getElementById('envStatus');

    // Load saved env vars
    const savedEnvUrl = localStorage.getItem('supabase_url') || '';
    const savedEnvAnonKey = localStorage.getItem('supabase_anon_key') || '';
    const savedEnvServiceKey = localStorage.getItem('supabase_service_key') || '';
    envUrlInput.value = savedEnvUrl;
    envAnonKeyInput.value = savedEnvAnonKey;
    envServiceKeyInput.value = savedEnvServiceKey;

    // Open panel if env vars are set
    if (savedEnvUrl || savedEnvAnonKey || savedEnvServiceKey) {
      settingsPanel.classList.add('open');
    }

    settingsToggle.addEventListener('click', () => {
      settingsPanel.classList.toggle('open');
    });

    function showEnvStatus(message, type) {
      envStatus.textContent = message;
      envStatus.className = 'env-status ' + type;
      setTimeout(() => {
        envStatus.className = 'env-status';
      }, 3000);
    }

    envSaveBtn.addEventListener('click', () => {
      const url = envUrlInput.value.trim();
      const anonKey = envAnonKeyInput.value.trim();
      const serviceKey = envServiceKeyInput.value.trim();
      
      if (url) localStorage.setItem('supabase_url', url);
      else localStorage.removeItem('supabase_url');
      
      if (anonKey) localStorage.setItem('supabase_anon_key', anonKey);
      else localStorage.removeItem('supabase_anon_key');
      
      if (serviceKey) localStorage.setItem('supabase_service_key', serviceKey);
      else localStorage.removeItem('supabase_service_key');
      
      showEnvStatus('Environment variables saved! They will be sent with each request.', 'success');
    });

    envClearBtn.addEventListener('click', () => {
      envUrlInput.value = '';
      envAnonKeyInput.value = '';
      envServiceKeyInput.value = '';
      localStorage.removeItem('supabase_url');
      localStorage.removeItem('supabase_anon_key');
      localStorage.removeItem('supabase_service_key');
      showEnvStatus('Environment variables cleared. Server defaults will be used.', 'info');
    });

    const baseInput = document.getElementById('base');
    const baseUrlHint = document.getElementById('baseUrlHint');
    const isProduction = !['localhost', '127.0.0.1'].some(h => window.location.hostname.includes(h));
    
    // Show hint on production
    if (isProduction) {
      baseUrlHint.innerHTML = 'Localhost URLs not supported. To test locally, <a href="https://github.com/fazla-cloud/Supabase-Auth" target="_blank" rel="noopener">clone the project</a>.';
      baseUrlHint.style.display = 'block';
    }
    
    // Auto-detect base URL from current location, or use saved value
    const savedBaseUrl = localStorage.getItem('api_base_url');
    baseInput.value = savedBaseUrl || window.location.origin;
    
    // Helper: Join URL parts, handling multiple slashes
    function joinUrl(...parts) {
      return parts
        .map((part, i) => {
          if (i === 0) return part.replace(/\/+$/, ''); // Remove trailing slashes from first part
          return part.replace(/^\/+/, '').replace(/\/+$/, ''); // Remove leading/trailing slashes from middle parts
        })
        .filter(p => p) // Remove empty parts
        .join('/');
    }
    
    // Helper: Normalize base URL (remove trailing slashes)
    function normalizeBaseUrl(url) {
      return url.replace(/\/+$/, '');
    }
    
    // On production, fetch BASE_URL from server config (supports path-based deployments)
    if (isProduction && !savedBaseUrl) {
      const configUrl = joinUrl(window.location.origin, window.location.pathname, 'config');
      fetch(configUrl)
        .then(r => r.json())
        .then(data => {
          if (data.baseUrl) {
            baseInput.value = normalizeBaseUrl(data.baseUrl);
          }
        })
        .catch(() => {
          // Fallback: try just origin + /config
          fetch(joinUrl(window.location.origin, 'config'))
            .then(r => r.json())
            .then(data => {
              if (data.baseUrl) {
                baseInput.value = normalizeBaseUrl(data.baseUrl);
              }
            })
            .catch(() => {}); // Ignore errors, keep current value
        });
    }
    
    // Check if URL is localhost
    function isLocalUrl(url) {
      try {
        const u = new URL(url);
        return ['localhost', '127.0.0.1'].some(h => u.hostname.includes(h));
      } catch { return false; }
    }
    
    // On production, disable localhost URLs
    if (isProduction && isLocalUrl(baseInput.value)) {
      baseInput.value = window.location.origin;
      localStorage.removeItem('api_base_url');
    }
    
    // Save base URL when changed
    baseInput.addEventListener('change', () => {
      let val = normalizeBaseUrl(baseInput.value.trim());
      
      // Block localhost on production
      if (isProduction && isLocalUrl(val)) {
        alert('⚠️ Localhost URLs are not supported on deployed sites.\n\nTo test with a local server, clone the project:\nhttps://github.com/fazla-cloud/Supabase-Auth');
        baseInput.value = window.location.origin;
        localStorage.removeItem('api_base_url');
        return;
      }
      
      // Update input with normalized value
      baseInput.value = val || window.location.origin;
      
      if (val && val !== window.location.origin) {
        localStorage.setItem('api_base_url', val);
      } else {
        localStorage.removeItem('api_base_url');
        baseInput.value = window.location.origin;
      }
    });

    function getOut(btn) {
      const id = btn.closest('.card').querySelector('[data-out]').getAttribute('data-out');
      return document.querySelector(`pre[data-out="${id}"]`);
    }

    function show(btn, text, isError) {
      const pre = getOut(btn);
      pre.textContent = text;
      pre.classList.remove('empty', 'ok', 'err');
      pre.classList.add(isError ? 'err' : 'ok');
    }

    document.querySelectorAll('button.run').forEach(btn => {
      btn.addEventListener('click', async () => {
        const base = normalizeBaseUrl(baseInput.value);
        
        // Block localhost on production
        if (isProduction && isLocalUrl(base)) {
          show(btn, '⚠️ Localhost URLs are not supported on deployed sites.\n\nTo test with a local server, clone the project:\nhttps://github.com/fazla-cloud/Supabase-Auth', true);
          return;
        }
        
        const path = btn.getAttribute('data-path');
        const method = btn.getAttribute('data-method');
        const card = btn.closest('.card');

        let url = joinUrl(base, path);
        const opts = { method, headers: {} };

        // Add custom env vars as headers if set
        const customUrl = localStorage.getItem('supabase_url');
        const customAnonKey = localStorage.getItem('supabase_anon_key');
        const customServiceKey = localStorage.getItem('supabase_service_key');
        if (customUrl) opts.headers['X-Supabase-Url'] = customUrl;
        if (customAnonKey) opts.headers['X-Supabase-Anon-Key'] = customAnonKey;
        if (customServiceKey) opts.headers['X-Supabase-Service-Key'] = customServiceKey;

        const bodyKeys = btn.getAttribute('data-body');
        if (bodyKeys) {
          try {
            const keys = JSON.parse(bodyKeys);
            const body = {};
            keys.forEach(k => {
              const input = card.querySelector(`[name="${k}"]`);
              if (input && input.value.trim()) {
                let v = input.value.trim();
                if (k === 'data' && v) {
                  try { body[k] = JSON.parse(v); } catch { body[k] = v; }
                } else body[k] = v;
              }
            });
            if (Object.keys(body).length) {
              opts.headers['Content-Type'] = 'application/json';
              opts.body = JSON.stringify(body);
            }
          } catch (e) {
            show(btn, 'Error building body: ' + e.message, true);
            return;
          }
        }

        const queryKeys = btn.getAttribute('data-query');
        if (queryKeys) {
          try {
            const keys = JSON.parse(queryKeys);
            const params = new URLSearchParams();
            keys.forEach(k => {
              const input = card.querySelector(`[name="${k}"]`);
              if (input && input.value.trim()) params.set(k, input.value.trim());
            });
            if (params.toString()) url += '?' + params.toString();
          } catch (e) {
            show(btn, 'Error building query: ' + e.message, true);
            return;
          }
        }

        const bearerKey = btn.getAttribute('data-header-bearer');
        if (bearerKey) {
          const input = card.querySelector(`[name="${bearerKey}"]`);
          if (input && input.value.trim()) {
            let v = input.value.trim();
            if (!v.toLowerCase().startsWith('bearer ')) v = 'Bearer ' + v;
            opts.headers['Authorization'] = v;
          }
        }

        show(btn, 'Loading…', false);

        try {
          const res = await fetch(url, opts);
          const text = await res.text();
          let parsed;
          try { parsed = JSON.parse(text); } catch { parsed = text; }
          const out = typeof parsed === 'object' ? JSON.stringify(parsed, null, 2) : parsed;
          show(btn, `Status: ${res.status}\n\n${out}`, res.status >= 400);
        } catch (e) {
          show(btn, 'Request failed: ' + e.message, true);
        }
      });
    });
  </script>
</body>
</html>